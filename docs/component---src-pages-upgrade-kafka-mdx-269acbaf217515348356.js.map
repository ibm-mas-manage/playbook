{"version":3,"sources":["webpack:///./src/pages/upgrade/kafka.mdx","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/PageHeader.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/EditLink.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/PageTabs.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/LastModifiedDate/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/LastModifiedDate/LastModifiedDate.js","webpack:///./node_modules/gatsby-theme-carbon/src/templates/Default.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/EditLink.module.scss","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/PageTabs.module.scss","webpack:///./node_modules/gatsby-theme-carbon/src/components/LastModifiedDate/last-modified-date.module.scss","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/PageHeader.module.scss"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent","PageHeader","title","theme","tabs","className","cx","styles","pageHeader","withTabs","length","darkMode","id","text","EditLink","relativePagePath","repositoryProp","repository","useStaticQuery","site","siteMetadata","baseUrl","subDirectory","href","branch","row","link","PageTabs","render","this","slug","currentTab","split","filter","Boolean","slice","pageTabs","map","tab","slugifiedTab","slugify","lower","strict","selected","currentTabRegex","RegExp","replace","key","selectedItem","listItem","to","tabsContainer","aria-label","list","React","Component","LastModifiedDate","date","lastModified","Date","toLocaleDateString","day","year","month","Default","pageContext","children","location","Title","frontmatter","titleType","frontmatterTheme","description","keywords","interiorTheme","useMetadata","pathPrefix","pathname","Layout","homepage","pageTitle","pageDescription","pageKeywords","label","Main","padded","NextPrevious","Utils","module","exports"],"mappings":"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","file":"component---src-pages-upgrade-kafka-mdx-269acbaf217515348356.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/travis/build/maximo/manage-playbook/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`The Maximo Integration Framework (MIF) supports asynchronous message processing using Kafka providers in a similar manner that the MIF can use JMS queues.  Kafka Topics persist messages to a data store for outbound Publish/Notification Channel messages and inbound Enterprise Service messages.  As well, Manage’s processing model for Kafka queues is similar to the processing model for JMS, where there is support for Sequential and Continuous message processing.`}</p>\n    <h2>{`Manage and Kafka`}</h2>\n    <p>{`Manage components provide support for using Kafka as a message queue for outbound (Publish Channel) and inbound (Enterprise Service) messages.  `}</p>\n    <ul>\n      <li parentName=\"ul\">{`Manage CRON tasks are used to consume messages from the queues.  `}</li>\n      <li parentName=\"ul\">{`MIF file loading, Interface Table CRON task and Servlet are examples of components used to write (produce) messages to the queues.   `}</li>\n      <li parentName=\"ul\">{`Within the External Systems application, there is an Action to support configuration of the Provider registration and queue processing.  `}</li>\n      <li parentName=\"ul\">{`The Manage REST API provides support for browsing messages within the queue.`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Note: there is no View/Delete Queue Messages feature for Kafka queues.`}</li>\n        </ul>\n      </li>\n    </ul>\n    <p>{`Kafka has a server configuration for the message size limit.  Consider the size of your transactions, especially when Attachments are integrated, when configuring this limit.  Be aware that the message size can impact the performance of reading/writing with the queue.\nManage provides configuration to set the maximum message size that the processing will handle when reading from and writing to Kafka.  The default message size is 10MB.  If you need to increase (or decrease) this size you can add this System Property mxe.kafka.messagesize, and set its value (in bytes) to be larger (or smaller) than 10MB.\nYou need to ensure that the Kafka server has a matching message size with what is used within Manage.`}</p>\n    <h2>{`Kafka Message Processing with Manage`}</h2>\n    <p>{`Kafka message processing keeps track of processed messages by maintaining an offset value (count) which represents the next message to be processed.  When a message is processed in Kafka, the offset is now beyond that message and that message will never be processed again.  The message is not deleted from the queue after being processed. It will remain in the queue until the configured expiration time is met for the message.  Be aware that Manage’s error processing, described below, will facilitate messages being re-processed when an error condition is encountered.`}</p>\n    <p>{`If you have messages in error that expire, the message is no longer in the queue, but it is still maintained in Manage’s Message Reprocessing application.  From here, the message can be manually re-processed as needed.  This re-processing option is only available via the application and there would be no automated re-processing of expired messages.`}</p>\n    <p>{`If you have messages in error that you never intend to re-process, you must configure the KafkaErrorsCleanup cron task to remove expired messages from Message Reprocessing.  These messages must be marked for deletion in Message Reprocessing before the Cron task will delete them. `}</p>\n    <p>{`Sequential queues don’t use an error queue since there is only one message in error at any time. A message in error will prevent other messages (behind the error) from processing. An error does not prevent new messages from being added to the queue.  Kafka retains messages in the queue (those processed and unprocessed) based on the retention/expiration time that is set in Kafka.  Setting this value properly is critical to ensure messages do not expire prior to being processed.  `}</p>\n    <p>{`For example, if you set the Kafka expiration to 48 hours and a message goes in error late Friday evening and other messages are stacked up behind the error.  If the error message is not addressed until Monday AM, the error message and other unprocessed messages may expire before messages continue processing.`}</p>\n    <p>{`A reminder that messages that are in error and then expire, can still be re-processed from the Message Reprocessing application.`}</p>\n    <p>{`A continuous queue `}<strong parentName=\"p\">{`must have`}</strong>{` an error queue configured.  A message that hits an error will be written to the bottom (end) of the queue so that it re-processes.  This will happen based on the Maximum Retry value (count) that is configured.  Once the message in error is processed up to the Maximum Retry count then it is written to the Error queue (status of HOLD) and Message re-processing and will no longer be processed in continuous queue. `}</p>\n    <p>{`The processing of the error queue is sequential and does facilitate automated re-processing of messages in error provided that the top message in the queue is successfully reprocessed or deleted.`}</p>\n    <p>{`Again, keep in mind if messages are sitting in a queue (sequential or continuous) but not being processed (i.e. cron task instance is not Active), there is a possibility that messages could expire before ever being processed.  In this case there is no recovery for those messages, since they didn’t process with an error, they would not appear in Message Reprocessing (contains only messages that hit an error).`}</p>\n    <h2>{`Apache Kafka Providers`}</h2>\n    <p>{`You can integrate with the Apache Kafka messaging platform to publish and consume messages asynchronously from the Kafka platform. Kafka can be configured as an external message provider that accepts and stores outbound and inbound integration messages.`}</p>\n    <p>{`The product provides the Kafka messaging client that supports consuming, producing, and browsing Kafka topics. To use Kafka features in the product, you must obtain and configure a Kafka server instance of the Kafka provider. You can choose any Kafka provider that is compatible with the Kafka 2.5 client libraries. `}</p>\n    <p>{`The Kafka provider manages the topics and the corresponding partitions and storage that persist the integration messages. The Maximo® integration framework provides the Kafka client framework to read, write, and browse messages in Kafka topics. `}</p>\n    <p>{`The integration framework only uses messaging features of Kafka and does not use any of the Kafka streaming features. `}</p>\n    <p>{`The framework uses the point-to-point delivery of Kafka messages. Thus, all Kafka topics are used as a messaging queue by the integration framework. Only one consumer group per topic is used to consume messages. A separate consumer group is used for browsing. Messages are not broadcast to multiple consumer groups. However, to enable browsing of topics, one other consumer group per topic is available.`}</p>\n    <p>{`Note: (as of February 2021) there is a known Kafka bug on Windows that can cause a Kafka failure if a queue has no messages processed over a period of time that is beyond 72 hours.`}</p>\n    <p>{`Specifying Kafka providers for message processing`}</p>\n    <p>{`You can specify Kafka as a messaging provider to asynchronously process outbound and inbound integration framework messages. The integration framework supplies a Kafka client. `}</p>\n    <h3>{`Before you begin`}</h3>\n    <p>{`Obtain and configure a Kafka provider that is compatible with the Kafka 2.5 libraries. `}</p>\n    <h3>{`About this task`}</h3>\n    <p>{`Kafka refers to a topic as a category or feed name to which records are published. Because of the way that the integration framework works with Kafka, topics are referred to as messaging queues. `}</p>\n    <h3>{`Procedure`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`In the External Systems application, add or select the external system and then select Add/Modify Message Providers to open the Message Hub Provider dialog box. `}</li>\n      <li parentName=\"ul\">{`Insert a row and add a Kafka provider name.\nThe provider type is specified as KAFKA.`}</li>\n      <li parentName=\"ul\">{`Specify values for the following properties. The SASL_MECHANISM and SECURITY_PROTOCOL properties are optional. `}</li>\n    </ul>\n    <table>\n  <tr>\n    <th>Option</th>\n    <th>Description</th>\n  </tr>\n  <tr>\n    <td>SASL_MECHANISM</td>\n    <td>\n     <pre>Fully Supported.The mechanism that implements the Simple Authentication and Security Layer (SASL) authentication and security framework.</pre>\n     <pre>Allowed values are PLAIN, GSSAPI, SCRAM-SHA-256, and SCRAM-SHA-512.</pre>\n     <p></p>\n     <pre>If no value is specified, the default value of PLAIN is used.</pre>\n   </td> \n  </tr>\n\t  \n  <tr>\n    <td>SECURITY_PROTOCOL</td>\n    <td>\n     <pre>The protocol that ensures secure data sharing. Allowed values are SASL_SSL, SSL, PLAINTEXT, or SASL_PLAINTEXT.</pre>\n   </td> \n  </tr>   \n   <tr>\n    <td>BOOTSTRAPSERVERS\n    <p></p>\n    <p></p>\n    PASSWORD\n    <p></p>\n    USERNAME</td>\n    <td>\n     <pre>A comma-separated list of server URLs that host your Kafka instance. Include the port specification. For example, specify brokerurl1,brokerurl2.</pre> \n     <pre>You can use quotation marks if needed.</pre>\n     <p></p>\n     <pre>If you specify the security protocol as either SASL_SSL or SASL_PLAINTEXT, specify an authentication password.</pre>\n     <p></p>\n     <pre>The username for your password.</pre>\n   </td> \n  </tr>   \n  </table>  \n    <ul>\n      <li parentName=\"ul\">{`Save your changes.`}</li>\n    </ul>\n    <h3>{`What to do next`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`Register the Kafka topics as Manage queues in the External Systems application. `}</li>\n      <li parentName=\"ul\">{`For continuous inbound queues, you must configure a corresponding sequential error queues or risk having messages expire.`}</li>\n      <li parentName=\"ul\">{`Configure one or more cron tasks to poll your queues and process the queue messages.`}</li>\n    </ul>\n    <h3>{`Registering Kafka topics as Manage queues`}</h3>\n    <p>{`To exchange message data and contents with Kafka, you register Kafka topics as Manage message queues. `}</p>\n    <p>{`To exchange message data and contents with Kafka, you register Kafka topics as Manage® message queues. `}</p>\n    <p>{`Before you can register Kafka topics as product queues, you must take the following steps: `}</p>\n    <ul>\n      <li parentName=\"ul\">{`Create the topics on the Kafka server. `}</li>\n      <li parentName=\"ul\">{`Configure one or more message providers of the Kafka type in the External Systems application.`}</li>\n      <li parentName=\"ul\">{`If you plan to use an error queue, create it in Kafka, and then in the product, register the error queue. For example, you can register an error queue for a continuous inbound queue as a sequential inbound error queue.`}</li>\n    </ul>\n    <h3>{`Procedure`}</h3>\n    <ol>\n      <li parentName=\"ol\">{`In the External Systems application, select the system for which you want to add a queue. `}</li>\n      <li parentName=\"ol\">{`Select Add/Modify Queues and add a queue. `}</li>\n      <li parentName=\"ol\">{`Specify the Kafka provider and topic name. Specify the message direction and whether the queue is sequential or continuous.\nAll outbound queues are sequential queues. You specify a queue as continuous by leaving the Sequential check box deselected and specify a queue as outbound by leaving the Inbound check box deselected.`}</li>\n      <li parentName=\"ol\">{`Optional: For continuous queues, you should specify an error queue.\nYou specify an error queue in your Kafka instance and then register the error queue as a sequential inbound queue. Since it is a sequential queue, error processing stops until the failed message either expires from Kafka or is fixed and retried.\nIf you do not specify an error queue, the framework tries to process a failed message according to the value that is specified for the retry count on the queue. If the message still fails, processing moves on to the next message offset and an administrator needs to process the message in the Message Reprocessing application. `}</li>\n      <li parentName=\"ol\">{`Specify the email address of the user who receives notifications when errors occur in the queue. This email address is used instead of the email value that is specified in system properties. `}</li>\n      <li parentName=\"ol\">{`In the Retention Time field, specify the time in hours for the message to be held in the MAXINTERROR table. Set this time to match the time that is specified for this topic in Kafka. The Kafka configuration pertains to the expiration of the message in the queue.\nAfter the retention time is exceeded, messages are deleted by the KafkaErrorsCleanup cron task if they both are expired from Kafka and are marked for deletion in the Message Reprocessing application. The product does not control message expiration in Kafka.`}</li>\n      <li parentName=\"ol\">{`In the Maximum Retry Count field, specify the maximum number of reprocessing attempts after an initial error and before a message is put in a Hold status and moved to the error queue (if an error queue is configured) for an administrator to review.  A recommended value to set would be 5, but your integration requirements may determine a different value.  `}</li>\n      <li parentName=\"ol\">{`As mentioned above the Kafka continuous consumer writes the message to the bottom of the queue with each error retry and continuously scrolls forward. `}</li>\n      <li parentName=\"ol\">{`Save your changes. `}</li>\n    </ol>\n    <h3>{`What to do next`}</h3>\n    <p>{`For each queue, add an instance of the Kafka cron task to periodically poll the queue for messages and process them. Configure a Kafka error cleanup cron task (described further down in this document) to delete the appropriate messages from the error table. `}</p>\n    <h3>{`Outbound sequential message processing`}</h3>\n    <p>{`The integration framework uses Kafka topics as outbound, sequential message queues. When a message is sent from the integration framework, it is routed to your Kafka provider, where it is hosted as a JSON message in a predefined topic. Although publish channels can send messages in XML or JSON format, the product wraps them as JSON formatted messages and writes them to the Kafka topic. An outbound message uses the structure that is shown in the following code example: `}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`{\n      “interfacetype”:”MAXIMO”,\n      “INTERFACE”:”MXPRInterface”,\n      “payload”:”<xml/json message>”,\n      “SENDER”:”MX”,\n      “destination”:”<external system name>”,\n      “destjndiname”:”<kafka topic name>”,\n      “compressed”:”1”,\n      “MEAMessageID”:”<providername>~<topic>~<partition>~<offset>”,\n      “mimetype”:”application/xml”\n}\n`}</code></pre>\n    <p>{`The payload property contains the payload that is sent to the endpoint. The entire Kafka message is  compressed at time of storage inside the Kafka partitions. In the Kafka partitions, messages are stored in a strict timestamp order. The position of the message in the partition is given a sequential ID number that is known as a message offset. Although Kafka topics can be partitioned, sequentially processed topics must be in a single partition. `}</p>\n    <p>{`After the message is written to the Kafka topic, it is processed by the associated Kafka cron task that you configure in the Cron Task Setup application for each topic. Processing occurs according to the external system and endpoint that are configured for the Channel. `}</p>\n    <p>{`If you need to consume messages directly from a queue, not using the MIF CRON process to deliver messages, then you must de-compress (Java) the message as part of the consumption process.`}</p>\n    <h3>{`Inbound sequential processing`}</h3>\n    <p>{`Inbound message processing can be sequential or continuous. Inbound sequential processing is similar to outbound sequential processing and requires the same types of configuration, including an instance of the Kafka cron task.\nThe structure of a sequential inbound message is shown in the following example: `}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`{\n     “interfacetype”: \"MAXIMO\",\n     “SENDER”: \"testkafka\",\n     “destination”: \"testkafka\",\n     “USER”: \"wilson\",\n     “MEAMessageID”: \"….\",\n     “INTERFACE”: \"MXASSETInterface\",\n     “payload”: \"{\"assetnum\":\"AZ163\",\"siteid\":\"BEDFORD\"}\",\n     “mimetype”: \"application/json\",\n     “destjndiname”: \"anamitratestcont\"\n}\n`}</code></pre>\n    <p>{`If you write messages directly to a queue, not using MIF components, then you must create the message following the above schema. You must provide a compressed (Java) message.`}</p>\n    <p>{`A sequential queue should be configured with a single partition and have one (and only one) Cron task instance to consume messages from the queue.`}</p>\n    <h3>{`Error processing for sequential queues`}</h3>\n    <p>{`With sequential queues, the first message that fails after the retry count that is specified for the queue, the Kafka cron task stops and does not move to the next message until the failed message either is corrected or marked for deletion in the Message Reprocessing application, or the message expires in Kafka. `}</p>\n    <p>{`Expired messages can be corrected and retried manually, but they are not removed from the error table automatically. You must configure the KafkaErrorsCleanup cron task to remove expired messages after the specified retention time if they are marked for deletion. Set the Manage’s retention time, when registering the queue, to match the retention time that is set in Kafka.`}</p>\n    <h3>{`Continuous Queue processing`}</h3>\n    <p>{`Inbound continuous message processing with Kafka is similar to JMS continuous message, however there are some differences in scaling and in error processing. In general, continuous queue processing will not stop processing when a message hits an error (as compared to a sequential queue). Messages in error are copied and pushed to an Error queue once they are processed the number of times as determined using the Retry Count.`}</p>\n    <p>{`A single Kafka queue can be scaled to have multiple consumers (multi-threaded) of messages by defining additional partitions for the queue.  Each partition would represent a separate consumer and each partition requires its own Cron Task instance to support message consumption for the partition. To scale processing, multiple partitions should be configured and the number of Cron task instances should match the number of partitions.`}</p>\n    <p>{`Another scaling option is that you can deploy multiple Kafka queues, with one or multiple partitions.  For example, you may set up separate queues for each external system that you integrate with.`}</p>\n    <h3>{`Error processing for continuous inbound queues`}</h3>\n    <p>{`For continuous inbound processing, you MUST set up an error queue in Kafka, register it in the product as a sequential inbound queue, and specify it as the error queue for a continuous inbound queue. You need to specify a Kafka CRON task instance to process messages from the error queue. `}</p>\n    <p>{`When you configure a continuous queue in the External Systems application, you specify a message Retry count and a retention time (in hours). The retry count value determines how many times the Kafka cron task for the continuous queue attempts to reprocess the message before the message is moved to the error queue. When an error is hit for a message in the continuous queue, the Kafka consumer rewrites the message to the bottom (end) of the queue with each error retry. If new messages are written to the queue before the rewrite occurs, those new messages are processed before the rewritten ‘errored’ message. Because of this processing, errors may be resolved if a new message provides data in Manage that is needed by the previously failed message.`}</p>\n    <p>{`Messages that fail processing (and hit the retry limit) are moved to the configured error queue in a HOLD status. Your configured error queue is a sequential queue, where the first failed message in the error queue stops the processing of the error queue until the failed message is fixed and retried or the message expires in Kafka.`}</p>\n    <p>{`Failing to configure an error queue for your Continuous queue could result in messages never being processed.`}</p>\n    <h3>{`Configuration of a redelivery delay for continuous queues`}</h3>\n    <p>{`An administrator can configure a redelivery delay (default is 5 seconds) that works when a retry count is specified for a continuous queue. When a redelivery delay is specified in the mxe.int.kafkaredeldelay property, the cron task for the queue does not rewrite a message to the front of the Kafka queue until after the delay time. The delay time is specified in seconds. Note:  this property is not provided and must be created if there is a need to implement a delay.`}</p>\n    <p>{`For example, if the delay is set to 30 seconds, the cron task for the continuous queue pauses for 30 seconds before it rewrites the message with errors to the front of the queue. The delay allows other messages to be processed in the queue, some of which can contain objects that are needed to successfully process the message that had errors. The drawback of using this mechanism is that the delay slows down the processor because it delays the cron task from continued processing. `}</p>\n    <ul>\n      <li parentName=\"ul\">{`Cron tasks for Kafka message consumption`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`You configure an instance of the Kafka cron task for each of your Kafka queues. The cron task consumes Kafka messages based on the schedule that you specify. All message consumption is controlled by the Kafka cron task.`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">{`You configure an instance of the Kafka cron task for each of your Kafka queues. The cron task consumes Kafka messages based on the schedule that you specify. All message consumption is controlled by the Kafka cron task.`}</li>\n      <li parentName=\"ul\">{`Kafka cron task`}</li>\n      <li parentName=\"ul\">{`The cron task consumes messages according to whether the queue is sequential or continuous. In the Cron Task Setup application, you filter for the Kafka cron task. Add one or more instances of the Kafka cron task and define its schedule, the administrative user to notify about problems, whether the cron is active, and whether to keep history. For each instance, specify values for the following properties:`}</li>\n    </ul>\n    <table>\n  <tr>\n    <th>Property</th>\n    <th>Description</th>\n    <th>Default</th>\n  </tr>\n  <tr>\n    <td>TOPIC</td>\n    <td>The name of the Kafka topic. This value is required.</td> \n    <td>None</td>\n  </tr>\n\t  \n  <tr>\n    <td>MESSAGEHUB</td>\n    <td>The name of the Kafka provider that is registered in the product. This value is required.</td> \n    <td>None</td>\n  </tr>\n  <tr>\n    <td>MESSAGEPROCESSOR</td>\n    <td>The message processor. The same message processor is used for JMS processing. This value is optional. If no value is specified, the default values are used. </td> \n    <td>\n     <pre>Inbound: psdi.iface.jms.QueueToMaximoProcessor</pre>\n     <pre>Outbound: psdi.iface.jms.QueueToDestManagerProcessor</pre>\n     <pre>Notification: com.ibm.tivoli.maximo.notification.NotificationMessageProcessor</pre>\n   </td>\n  </tr>\n    </table>  \n    <h3>{`Browsing the queue`}</h3>\n    <p>{`Manage provides a REST api that will let you browse the content of messages in a Kafka queue.  You will need a browser session or some other API tool to execute a REST request.`}</p>\n    <p>{`The API format is shown in the following examples `}</p>\n    <ul>\n      <li parentName=\"ul\">{`In this example you need to provide your Manage environment’s Hostname:Port and the Kafka Provider and Topic names`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`http://localhost:7001/maximo/oslc/browsemsghub/Kafka Provider Name/Kafka Topic Name?&lean=1`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">{`This example shows the use of the pageSize to limit the content in the response`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`http://localhost:7001/maximo/oslc/browsemsghub/Kafka Provider Name/Kafka Topic Name?oslc.pageSize=100`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">{`This example shows the use of the ‘all’ parameter to show all records or records from the offset point forward.  Default value is 0 (false) which shows messages from the offset forward.`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`http://localhost:7001/maximo/oslc/browsemsghub/Kafka Provider Name/Kafka Topic Name?all=1`}\n            <ul parentName=\"li\">\n              <li parentName=\"ul\">{`A value of 1 will show all records, ignoring the offset value.`}</li>\n            </ul>\n          </li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">{`This example shows the use of the pageSize to limit the content in the response and identifies the Partition`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`http://localhost:7001/maximo/oslc/browsemsghub/Kafka Provider Name>/Kafka Topic Name?oslc.pageSize=100&partition=0`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ul\">{`This example shows the use of the pageSize to limit the content in the response and identifies the Partition and requests and 2nd page of data`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`http://localhost:7001/maximo/oslc/browsemsghub/Kafka Provider Name/Kafka Topic Name?oslc.pageSize=100&partition=0&pageno=2`}</li>\n        </ul>\n      </li>\n    </ul>\n    <p>{`Keep in mind when you are viewing a queue, you will see messages that are unprocessed as well as those that have been processed and have not yet expired.  In a Continuous queue you could see multiple iterations of a message if it encountered an error during processing. `}</p>\n    <h3>{`KafkaErrorsCleanup Cron Task`}</h3>\n    <p>{`Kafka does not provide a way to delete messages from the server. When a message is older than the retention time that you configure on the server, Kafka expires the message. Manage® cron tasks cannot process expired message from the queue, and if any of the expired messages didn’t process because of errors, they remain in the Message Reprocessing application and can be managed from there.`}</p>\n    <p>{`The KafkaErrorsCleanup cron task can be configured to clean up the Kafka expired messages that meet the following conditions: `}</p>\n    <ul>\n      <li parentName=\"ul\">{`The message must be older than the retention time in hours that is specified when you add a message queue for a publish channel or enterprise service or notification channel. The integration administrator should set this time to match the retention time that is specified when the topic is registered in Kafka. `}</li>\n      <li parentName=\"ul\">{`The message must be marked for deletion in the product or already processed. Messages that are already processed are no longer visible in the Message Reprocessing application, but they are deleted by the cleanup cron task. `}</li>\n    </ul>\n    <p>{`Messages that have a status of Hold or Retry are not deleted by the cron task. The integration administrator can try to reprocess those messages manually from the Message Reprocessing application or mark the message for deletion.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","import PageHeader from './PageHeader';\n\nexport default PageHeader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport styles from './PageHeader.module.scss';\n\nconst PageHeader = ({ title, theme, tabs = [] }) => (\n  <div\n    className={cx(styles.pageHeader, {\n      [styles.withTabs]: tabs.length,\n      [styles.darkMode]: theme === 'dark',\n    })}>\n    <div className=\"bx--grid\">\n      <div className=\"bx--row\">\n        <div className=\"bx--col-lg-12\">\n          <h1 id=\"page-title\" className={styles.text}>\n            {title}\n          </h1>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\nPageHeader.propTypes = {\n  /**\n   * Specify the title for the page\n   */\n  title: PropTypes.node,\n};\n\nexport default PageHeader;\n","import EditLink from './EditLink';\n\nexport default EditLink;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { graphql, useStaticQuery } from 'gatsby';\n\nimport { link, row } from './EditLink.module.scss';\n\nconst EditLink = ({ relativePagePath, repository: repositoryProp }) => {\n  const {\n    site: {\n      siteMetadata: { repository },\n    },\n  } = useStaticQuery(graphql`\n    query REPOSITORY_QUERY {\n      site {\n        siteMetadata {\n          repository {\n            baseUrl\n            subDirectory\n            branch\n          }\n        }\n      }\n    }\n  `);\n\n  const { baseUrl, subDirectory, branch } = repositoryProp || repository;\n\n  const href = `${baseUrl}/edit/${branch}${subDirectory}/src/pages${relativePagePath}`;\n\n  return baseUrl ? (\n    <div className={`bx--row ${row}`}>\n      <div className=\"bx--col\">\n        <a className={link} href={href}>\n          Edit this page on GitHub\n        </a>\n      </div>\n    </div>\n  ) : null;\n};\n\nEditLink.propTypes = {\n  repository: PropTypes.shape({\n    baseUrl: PropTypes.string,\n    subDirectory: PropTypes.string,\n    branch: PropTypes.string,\n  }),\n  relativePagePath: PropTypes.string,\n};\n\nexport default EditLink;\n","import PageTabs from './PageTabs';\n\nexport default PageTabs;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'gatsby';\nimport slugify from 'slugify';\nimport cx from 'classnames';\n\nimport {\n  tabsContainer,\n  list,\n  selectedItem,\n  listItem,\n  link,\n} from './PageTabs.module.scss';\n\nexport default class PageTabs extends React.Component {\n  render() {\n    const { title, tabs, slug } = this.props;\n    const currentTab = slug.split('/').filter(Boolean).slice(-1)[0];\n\n    const pageTabs = tabs.map((tab) => {\n      const slugifiedTab = slugify(tab, { lower: true, strict: true });\n      const selected = slugifiedTab === currentTab;\n      // matches with or without trailing slash: /?\n      // matches with or without hash link: (#.*)?\n      const currentTabRegex = new RegExp(`${currentTab}/?(#.*)?$`);\n      const href = slug.replace(currentTabRegex, slugifiedTab);\n      return (\n        <li key={tab} className={cx({ [selectedItem]: selected }, listItem)}>\n          <Link className={link} to={`${href}`}>\n            {tab}\n          </Link>\n        </li>\n      );\n    });\n\n    return (\n      <div className={tabsContainer}>\n        <div className=\"bx--grid\">\n          <div className=\"bx--row\">\n            <div className=\"bx--col-lg-12 bx--col-no-gutter\">\n              <nav aria-label={title}>\n                <ul className={list}>{pageTabs}</ul>\n              </nav>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nPageTabs.propTypes = {\n  tabs: PropTypes.array,\n  slug: PropTypes.string,\n};\n","import LastModifiedDate from './LastModifiedDate';\n\nexport default LastModifiedDate;\n","import React from 'react';\nimport { Row, Column } from '../Grid';\nimport styles from './last-modified-date.module.scss';\n\nconst LastModifiedDate = ({ date }) => {\n  const options = {\n    day: '2-digit',\n    year: 'numeric',\n    month: 'long',\n  };\n\n  const lastModified = new Date(date);\n\n  return date ? (\n    <Row className={styles.row}>\n      <Column>\n        <div className={styles.text}>\n          Page last updated: {lastModified.toLocaleDateString('en-GB', options)}\n          {/* // https://www-03preprod.ibm.com/support/knowledgecenter/ibm_style/dates-and-times.html */}\n        </div>\n      </Column>\n    </Row>\n  ) : null;\n};\nexport default LastModifiedDate;\n","import React from 'react';\nimport slugify from 'slugify';\nimport { useStaticQuery, graphql } from 'gatsby';\n\nimport Utils from '../components/Utils';\nimport Layout from '../components/Layout';\nimport PageHeader from '../components/PageHeader';\nimport EditLink from '../components/EditLink';\nimport NextPrevious from '../components/NextPrevious';\nimport PageTabs from '../components/PageTabs';\nimport Main from '../components/Main';\nimport useMetadata from '../util/hooks/useMetadata';\nimport LastModifiedDate from '../components/LastModifiedDate';\n\nconst Default = ({ pageContext, children, location, Title }) => {\n  const { frontmatter = {}, relativePagePath, titleType } = pageContext;\n  const {\n    tabs,\n    title,\n    theme: frontmatterTheme,\n    description,\n    keywords,\n    date,\n  } = frontmatter;\n\n  const { interiorTheme } = useMetadata();\n\n  // get the path prefix if it exists\n  const {\n    site: { pathPrefix },\n  } = useStaticQuery(graphql`\n    query PATH_PREFIX_QUERY {\n      site {\n        pathPrefix\n      }\n    }\n  `);\n\n  // let gatsby handle prefixing\n  const slug = pathPrefix\n    ? location.pathname.replace(pathPrefix, '')\n    : location.pathname;\n\n  const getCurrentTab = () => {\n    if (!tabs) return '';\n    return (\n      slug.split('/').filter(Boolean).slice(-1)[0] ||\n      slugify(tabs[0], { lower: true })\n    );\n  };\n\n  const currentTab = getCurrentTab();\n\n  const theme = frontmatterTheme || interiorTheme;\n\n  return (\n    <Layout\n      tabs={tabs}\n      homepage={false}\n      theme={theme}\n      pageTitle={title}\n      pageDescription={description}\n      pageKeywords={keywords}\n      titleType={titleType}>\n      <PageHeader\n        title={Title ? <Title /> : title}\n        label=\"label\"\n        tabs={tabs}\n        theme={theme}\n      />\n      {tabs && (\n        <PageTabs\n          title={title}\n          slug={slug}\n          tabs={tabs}\n          currentTab={currentTab}\n        />\n      )}\n      <Main padded>\n        {children}\n        <EditLink relativePagePath={relativePagePath} />\n        <LastModifiedDate date={date} />\n      </Main>\n      <NextPrevious\n        pageContext={pageContext}\n        location={location}\n        slug={slug}\n        tabs={tabs}\n        currentTab={currentTab}\n      />\n      <Utils />\n    </Layout>\n  );\n};\n\nexport default Default;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"EditLink-module--bx--text-truncate--end--2pqje\",\"bxTextTruncateFront\":\"EditLink-module--bx--text-truncate--front--3_lIE\",\"link\":\"EditLink-module--link--1qzW3\",\"row\":\"EditLink-module--row--1B9Gk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"PageTabs-module--bx--text-truncate--end--267NA\",\"bxTextTruncateFront\":\"PageTabs-module--bx--text-truncate--front--3xEQF\",\"tabsContainer\":\"PageTabs-module--tabs-container--8N4k0\",\"list\":\"PageTabs-module--list--3eFQc\",\"listItem\":\"PageTabs-module--list-item--nUmtD\",\"link\":\"PageTabs-module--link--1mDJ1\",\"selectedItem\":\"PageTabs-module--selected-item--YPVr3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"last-modified-date-module--bx--text-truncate--end--123zi\",\"bxTextTruncateFront\":\"last-modified-date-module--bx--text-truncate--front--3xeKz\",\"text\":\"last-modified-date-module--text--24m-4\",\"row\":\"last-modified-date-module--row--2BquN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"PageHeader-module--bx--text-truncate--end--mZWeX\",\"bxTextTruncateFront\":\"PageHeader-module--bx--text-truncate--front--3zvrI\",\"pageHeader\":\"PageHeader-module--page-header--3hIan\",\"darkMode\":\"PageHeader-module--dark-mode--hBrwL\",\"withTabs\":\"PageHeader-module--with-tabs--3nKxA\",\"text\":\"PageHeader-module--text--o9LFq\"};"],"sourceRoot":""}