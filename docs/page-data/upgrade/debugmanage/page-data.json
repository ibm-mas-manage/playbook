{"componentChunkName":"component---src-pages-upgrade-debugmanage-mdx","path":"/upgrade/debugmanage/","result":{"pageContext":{"frontmatter":{"title":"Debug Manage Application"},"relativePagePath":"/upgrade/debugmanage.mdx","titleType":"append","MdxNode":{"id":"83c35b14-c79d-523c-a8e3-064558c37b5b","children":[],"parent":"dfe6799d-832e-5bfd-83db-8f223a1ec0fe","internal":{"content":"---\ntitle: Debug Manage Application\n---\n- Create a new server deployment.\n  - Create a new deployment for all or ui server bundle type, replace the `spec` section with the existing all or ui server deplyment.\n    - Update the name. For eaxmple, {instanceid}-{workspaceid}-alldebug\n  - Add port 7777 in the ports section.\n    - ` - containerPort: 7777\n          protocol: TCP`\n\n\nSample:\n```\n    ports:\n      - containerPort: 9081\n        protocol: TCP\n      - containerPort: 9444\n        protocol: TCP\n      - containerPort: 7777\n        protocol: TCP\n```\n  - Update cmd args for the manage server\n    - Replace `/tmp/startwlp.sh;` with \n      `/tmp/genJDBCTruststore.sh; /opt/ibm/wlp/bin/server debug\n       defaultServer;`\n\nSample:\n```\nimage: >-\n    image-registry.openshift-image-registry.svc:5000/mas-sb1-manage/sb1-masdev-all@sha256:6e6891b03d9237e64b6a3c4c41fd8dc331da74cf4cb2393a3ba70588599c600f\nargs:\n  - >-\n    echo generateKeyStore...; openssl pkcs12 -export -in\n    /etc/ssl/certs/internal-manage-tls/tls.crt -inkey\n    /etc/ssl/certs/internal-manage-tls/tls.key -out ${java_keystore}\n    -password pass:${java_keystore_password};\n    /tmp/genJDBCTruststore.sh; /opt/ibm/wlp/bin/server debug\n    defaultServer;\n  ```\n- Wait for pod to start\n- On local machine, open PowerShell\n- Install OpenShift Container Platform command-line interface [OC CLI](https://docs.openshift.com/container-platform/4.2/cli_reference/openshift_cli/getting-started-cli.html). \n- Log in to cluster using oc login and switch to correct project using `oc project` command\n- Run: kubectl port-forward `<podname>` 7777:7777\n\n```\nkubectl port-forward sb1-masdev-alldebug-57d79d4dfc-q82vn 7777:7777\n\nForwarding from `127.0.0.1:7777 -> 7777`\nForwarding from `[::1]:7777 -> 7777`\n\n```\n- If needed kubectl can be obtained here: https://kubernetes.io/docs/tasks/tools/\n- Create a Debug Configuration (Remote Java Project) using localhost and port 7777 in your IDE(Eclipse). Launch it\n  - Set the project with the Manange code. Use the [manageadmin image]('/upgrade/manageadmin') to get the Manage code(classes and libraries)\n- The pod's logs will now show the server starting\n\nNow you will see the 'Handling Connection' in the PowerShell window.\n\n```\nkubectl port-forward sb1-masdev-alldebug-57d79d4dfc-q82vn 7777:7777\n\nForwarding from `127.0.0.1:7777 -> 7777`\nForwarding from `[::1]:7777 -> 7777`\nHandling connection for 7777\n```\n- Create a service and route for new deployment\n- Use the new route location link to navigate to the Manange application if created a new deployment. Append '/maximo' to the link.\n- Remote Debugging link: https://ibm.github.io/spm-kubernetes/troubleshooting/Remote-Debugging/\n- Sample IDE\n\n![image](images/eclipse.png) ","type":"Mdx","contentDigest":"25cb18e03151b57b47c4682449363ebb","owner":"gatsby-plugin-mdx","counter":227},"frontmatter":{"title":"Debug Manage Application"},"exports":{},"rawBody":"---\ntitle: Debug Manage Application\n---\n- Create a new server deployment.\n  - Create a new deployment for all or ui server bundle type, replace the `spec` section with the existing all or ui server deplyment.\n    - Update the name. For eaxmple, {instanceid}-{workspaceid}-alldebug\n  - Add port 7777 in the ports section.\n    - ` - containerPort: 7777\n          protocol: TCP`\n\n\nSample:\n```\n    ports:\n      - containerPort: 9081\n        protocol: TCP\n      - containerPort: 9444\n        protocol: TCP\n      - containerPort: 7777\n        protocol: TCP\n```\n  - Update cmd args for the manage server\n    - Replace `/tmp/startwlp.sh;` with \n      `/tmp/genJDBCTruststore.sh; /opt/ibm/wlp/bin/server debug\n       defaultServer;`\n\nSample:\n```\nimage: >-\n    image-registry.openshift-image-registry.svc:5000/mas-sb1-manage/sb1-masdev-all@sha256:6e6891b03d9237e64b6a3c4c41fd8dc331da74cf4cb2393a3ba70588599c600f\nargs:\n  - >-\n    echo generateKeyStore...; openssl pkcs12 -export -in\n    /etc/ssl/certs/internal-manage-tls/tls.crt -inkey\n    /etc/ssl/certs/internal-manage-tls/tls.key -out ${java_keystore}\n    -password pass:${java_keystore_password};\n    /tmp/genJDBCTruststore.sh; /opt/ibm/wlp/bin/server debug\n    defaultServer;\n  ```\n- Wait for pod to start\n- On local machine, open PowerShell\n- Install OpenShift Container Platform command-line interface [OC CLI](https://docs.openshift.com/container-platform/4.2/cli_reference/openshift_cli/getting-started-cli.html). \n- Log in to cluster using oc login and switch to correct project using `oc project` command\n- Run: kubectl port-forward `<podname>` 7777:7777\n\n```\nkubectl port-forward sb1-masdev-alldebug-57d79d4dfc-q82vn 7777:7777\n\nForwarding from `127.0.0.1:7777 -> 7777`\nForwarding from `[::1]:7777 -> 7777`\n\n```\n- If needed kubectl can be obtained here: https://kubernetes.io/docs/tasks/tools/\n- Create a Debug Configuration (Remote Java Project) using localhost and port 7777 in your IDE(Eclipse). Launch it\n  - Set the project with the Manange code. Use the [manageadmin image]('/upgrade/manageadmin') to get the Manage code(classes and libraries)\n- The pod's logs will now show the server starting\n\nNow you will see the 'Handling Connection' in the PowerShell window.\n\n```\nkubectl port-forward sb1-masdev-alldebug-57d79d4dfc-q82vn 7777:7777\n\nForwarding from `127.0.0.1:7777 -> 7777`\nForwarding from `[::1]:7777 -> 7777`\nHandling connection for 7777\n```\n- Create a service and route for new deployment\n- Use the new route location link to navigate to the Manange application if created a new deployment. Append '/maximo' to the link.\n- Remote Debugging link: https://ibm.github.io/spm-kubernetes/troubleshooting/Remote-Debugging/\n- Sample IDE\n\n![image](images/eclipse.png) ","fileAbsolutePath":"/home/travis/build/maximo/manage-playbook/src/pages/upgrade/debugmanage.mdx"}}},"staticQueryHashes":["1364590287","137577622","137577622","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","768070550"]}