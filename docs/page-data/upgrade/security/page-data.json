{"componentChunkName":"component---src-pages-upgrade-security-mdx","path":"/upgrade/security/","result":{"pageContext":{"frontmatter":{"title":"Security & User Management"},"relativePagePath":"/upgrade/security.mdx","titleType":"append","MdxNode":{"id":"f50227d6-5d16-5824-bfb8-e27fafb62385","children":[],"parent":"11583d38-fbda-5b9f-b0e1-1b456d214137","internal":{"content":"---\ntitle: Security & User Management\n---  \n\n- Authentication is managed by [MAS Identity Provider](https://www.ibm.com/docs/en/mas84/8.4.0?topic=administering-configuring-authentication). The following Identity Providers(IDP) are supported:\n  - Local IDP (username/password registered in Mongo DB)\n  - LDAP\n  - SAML\n\n\n- All headless interactions (Integration, REST) require API Key for authentication.\n\n\n- LDAP integration is managed by MAS.\n  - The existing Maximo EAM LDAP/VMM synchronization is not supported and is replaced by the synchronization process in MAS. The details are in the LDAP User Synchronization section.\n  - MAS will use WebSphere Liberty to synchronize with LDAP.\n    - Liberty provides a SCIM API for MAS to consume the data from LDAP repositories into the MAS user registry. MAS will push users/groups to Manage from the MAS repository.\n\n\n- Existing Maximo EAM users are synchronized with MAS User Registry during the upgrade. The details are in the Users Synchronization section.\n\n- New users can only be created in MAS and will synchronize to Manage. If you currently have integration to create or update users in Maximo, you will need to integrate users to MAS, not Manage(Maximo).\n\n## User Synchronization\n\n- When a user is created and is assigned the Manage role, MAS will push the change push to Manage. The Manage application user sync process is responsible for reading the data from MAS IDP/User Registry and using the MIF to push it into Manage.\n\n- If a MAS user has the ADMIN role for the application Manage, it will be assigned to one or more default admin security groups in Manage, which is defined in the system property “mxe.defaultgroups.manage.admin”. The initial value of this property is the same as the maxvar ADMINGROUP, but it is can be changed to a different desired group. If the system property is set to null, then user will not be assigned to any default admin security group.\n\n- If a user has the NO_ACCESS role or is deleted in MAS, the user becomes INACTIVE in the Manage application.\n\n- The user synchronization process from MAS to Manage utilizes the Manage Integration Framework (MIF). It uses integration’s Enterprise Service to post data to Manage. If a MAS user is assigned the Manage role and has a sync status of PENDING or DELETE_PENDING, the user sync will process it and upon successful synchronization change the sync status to SYNCED.\n\n### Sample of inbound message from MAS \n\n```\n{   \n  \"appId\": \"manage\",\n  \"users\": [\n    {\n      _id\": \"johnjoe\",\n      \"username\": \"johndoe\",\n      \"emails\": [\n        {\n          \"value\": \"john.doe@example.com\",\n          \"type\": \"work\",\n          \"primary\": true\n        }\n      ],\n      \"phoneNumbers\": [\n        {\n          \"value\": \"555-555-5555\",\n          \"type\": \"work\",\n          \"primary\": true\n        }\n      ],\n      \"addresses\": [\n        {\n          \"streetAddress\": \"100 Universal City Plaza\",\n          \"locality\": \"Hollywood\",\n          \"region\": \"CA\",\n          \"postalCode\": 91608,\n          \"country\": \"USA\",\n          \"formatted\": \"100 Universal City Plaza\\\\nHollywood, CA 91608 USA\",\n          \"type\": \"work\",\n          \"primary\": true\n        }\n      ],\n      \"givenName\": \"John\",\n      \"familyName\": \"Doe\",\n      \"displayName\": \"John Doe\",\n      \"title\": \"Architect\",\n      \"extension\": {\n        \"additionalProp1\": {}\n      },\n      \"issuer\": \"local|ldap|saml\",\n      \"permissions\": {\n        \"systemAdmin\": true,\n        \"userAdmin\": true\n      },\n      \"entitlement\": {\n        \"application\": \"BASE\",\n        \"admin\": \"ADMIN_LIMITED\"\n      },\n      \"preferences\": {\n        \"locale\": {\n          \"language\": \"en\",\n          \"country\": \"GB\"\n        },\n        \"timezone\": \"Africa/Abidjan\"\n      }\n    }\n  ]\n}\n```\n\n### Sample of output from default user exit\nThis is a result in Manage object structures after mapping masuser.json with the OOTB user exit.  This can serve as the input to further customized mapping if desired.\n\n\n```\n{\n   \"addressline1\": \"100 Universal City Plaza\",\n   \"city\": \"Hollywood\",\n   \"country\": \"USA\",\n   \"displayname\": \"Joe Smith\",\n   \"email\": [\n      {\n         \"_action\": \"AddChange\",\n         \"emailaddress\": \"joesmith5@us.ibm.com\",\n         \"isprimary\": 1,\n         \"type\": \"work\"\n      },\n      {\n         \"_action\": \"AddChange\",\n         \"emailaddress\": \"joesmith51@gmail.com\",\n         \"isprimary\": 0,\n         \"type\": \"work\"\n      }\n   ],\n   \"extension\": {\n      \"costCenter\": \"4130\",\n      \"employeeNumber\": \"701984\"\n   },\n   \"firstname\": \"Joe\",\n   \"language\": \"EN\",\n   \"lastname\": \"Smith\",\n   \"locale\": \"en_US\",\n   \"maxuser\": [\n      {\n         \"groupuser\": [\n            {\n               \"_action\": \"AddChange\",\n               \"groupname\": \"MAXADMIN\"\n            },\n            {\n               \"_action\": \"AddChange\",\n               \"groupname\": \"TOOLMGR\"\n            }\n         ],\n         \"inactivesites\": 1,\n         \"loginid\": \"joesmith5\",\n         \"statusdate\": \"2020-10-30T15:43:44-04:00\",\n         \"userid\": \"joesmith5\"\n      }\n   ],\n   \"personid\": \"joesmith5\",\n   \"phone\": [\n      {\n         \"_action\": \"AddChange\",\n         \"isprimary\": 1,\n         \"phonenum\": \"555-555-5555\",\n         \"type\": \"work\"\n      },\n      {\n         \"_action\": \"AddChange\",\n         \"isprimary\": 0,\n         \"phonenum\": \"555-555-4444\",\n         \"type\": \"home\"\n      }\n   ],\n   \"postalcode\": \"91608\",\n   \"stateprovince\": \"CA\",\n   \"statusdate\": \"2020-10-30T15:43:44-04:00\",\n   \"title\": \"Supervisor\"\n}\n```\n\n## LDAP Synchronization\n\nThe section tagged “extension” as shown in the samples includes all extra attributes which are not part of default mapping. The default mapping can be customized by creating a Java user exit or automation script or JSON Mapper.\n\n- Maximo Application Suite (MAS) will synchronize users and groups from the LDAP server. There is no direct synchronization from LDAP to Manage.\n- MAS will use WebSphere Liberty to synchronize with LDAP. Liberty provides a SCIM API for MAS to consume the data from LDAP repositories into MAS User Registry/IDP.\n\t- SCIM defines the resource (Users/Groups) schema as well as the REST(CRUD) APIs to manage the resources.\n- MAS to consume the data from LDAP repositories into MAS User Registry/IDP.\n- SCIM defines the resource (Users/Groups) schema as well as the REST(CRUD) APIs to manage the resources.\n- The section tagged “extension” can include all extra attributes which are not part of default mapping.\n- The schema attribute mapping can be customized using user exit, an automation script on user exit, or replacing the standard user exist with JSON Mapper user exit.\n## Flow ##\n- User configures SCIM User Sync from MAS UI\n- Backend API will create a ScimCfg CR and secret\n- TrustManager operator will add LDAP Server certificate to the truststore\n- SCIM operator will deploy liberty server and the k8s cronjob\n- Cron job will get Users from Liberty server and store it in MAS User Registry (mongo db)\n\n![image](images/ldap.png)\n\n<p></p>\nThe MAS sync process will consume user and user group information from SCIM APIs and update the MAS user registry. The Manage user sync process will pull the data from MAS and pushes it to Manage using MIF.\n\n## Manage Group Synchronization \n- User Groups are synchronized into Manage from MAS.\n- Users will be added in the group only if they are valid users in Manage.\n- The existing users in a group will be replaced by the users in the payload same as LDAP group synchronization.\n\n## Bulk Import Users to MAS (Upgrade)\n- Maximo users and their profiles (language, timezone, and locale) will be imported to MAS during the upgrade.\n  - A one-time cron task instance will be created during the upgrade to import users to MAS.\n- Welcome emails will be sent to the users with a password for their account. If the user email is not set, email will be sent to the system administrator email account.\n  - The system administrator email will be set up from MAS admin dashboard.\n  - SMTP can be configured in MAS prior to upgrade to receive Welcome emails and emails with user password.\n  - The user password can be reset by the System Administrator.\n\nWelcome Email Templates:\n \n```\nTo: ${email}\nTitle: Welcome to IBM Maximo Application Suite\nBody: Welcome to IBM Maximo Application Suite, a new account has been registered to ${email} in <a href=\"${masHomeUrl}\">IBM Maximo Application Suite (${instanceName})</a>.\n\nUsername: ${username}\n\nYou will receive your password in a seperate e-mail (only show this if emailPassword has been set)\n```\n\n```\nTo: ${email}\nTitle: Your new IBM Maximo Application Suite password\nBody: Welcome to <a href=\"${masHomeUrl}\">IBM Maximo Application Suite (${instanceName})</a>. your new password is below.\n\nPassword: ${password}\n```\n\n","type":"Mdx","contentDigest":"1404f594ea6a355742825ff513a21a51","owner":"gatsby-plugin-mdx","counter":232},"frontmatter":{"title":"Security & User Management"},"exports":{},"rawBody":"---\ntitle: Security & User Management\n---  \n\n- Authentication is managed by [MAS Identity Provider](https://www.ibm.com/docs/en/mas84/8.4.0?topic=administering-configuring-authentication). The following Identity Providers(IDP) are supported:\n  - Local IDP (username/password registered in Mongo DB)\n  - LDAP\n  - SAML\n\n\n- All headless interactions (Integration, REST) require API Key for authentication.\n\n\n- LDAP integration is managed by MAS.\n  - The existing Maximo EAM LDAP/VMM synchronization is not supported and is replaced by the synchronization process in MAS. The details are in the LDAP User Synchronization section.\n  - MAS will use WebSphere Liberty to synchronize with LDAP.\n    - Liberty provides a SCIM API for MAS to consume the data from LDAP repositories into the MAS user registry. MAS will push users/groups to Manage from the MAS repository.\n\n\n- Existing Maximo EAM users are synchronized with MAS User Registry during the upgrade. The details are in the Users Synchronization section.\n\n- New users can only be created in MAS and will synchronize to Manage. If you currently have integration to create or update users in Maximo, you will need to integrate users to MAS, not Manage(Maximo).\n\n## User Synchronization\n\n- When a user is created and is assigned the Manage role, MAS will push the change push to Manage. The Manage application user sync process is responsible for reading the data from MAS IDP/User Registry and using the MIF to push it into Manage.\n\n- If a MAS user has the ADMIN role for the application Manage, it will be assigned to one or more default admin security groups in Manage, which is defined in the system property “mxe.defaultgroups.manage.admin”. The initial value of this property is the same as the maxvar ADMINGROUP, but it is can be changed to a different desired group. If the system property is set to null, then user will not be assigned to any default admin security group.\n\n- If a user has the NO_ACCESS role or is deleted in MAS, the user becomes INACTIVE in the Manage application.\n\n- The user synchronization process from MAS to Manage utilizes the Manage Integration Framework (MIF). It uses integration’s Enterprise Service to post data to Manage. If a MAS user is assigned the Manage role and has a sync status of PENDING or DELETE_PENDING, the user sync will process it and upon successful synchronization change the sync status to SYNCED.\n\n### Sample of inbound message from MAS \n\n```\n{   \n  \"appId\": \"manage\",\n  \"users\": [\n    {\n      _id\": \"johnjoe\",\n      \"username\": \"johndoe\",\n      \"emails\": [\n        {\n          \"value\": \"john.doe@example.com\",\n          \"type\": \"work\",\n          \"primary\": true\n        }\n      ],\n      \"phoneNumbers\": [\n        {\n          \"value\": \"555-555-5555\",\n          \"type\": \"work\",\n          \"primary\": true\n        }\n      ],\n      \"addresses\": [\n        {\n          \"streetAddress\": \"100 Universal City Plaza\",\n          \"locality\": \"Hollywood\",\n          \"region\": \"CA\",\n          \"postalCode\": 91608,\n          \"country\": \"USA\",\n          \"formatted\": \"100 Universal City Plaza\\\\nHollywood, CA 91608 USA\",\n          \"type\": \"work\",\n          \"primary\": true\n        }\n      ],\n      \"givenName\": \"John\",\n      \"familyName\": \"Doe\",\n      \"displayName\": \"John Doe\",\n      \"title\": \"Architect\",\n      \"extension\": {\n        \"additionalProp1\": {}\n      },\n      \"issuer\": \"local|ldap|saml\",\n      \"permissions\": {\n        \"systemAdmin\": true,\n        \"userAdmin\": true\n      },\n      \"entitlement\": {\n        \"application\": \"BASE\",\n        \"admin\": \"ADMIN_LIMITED\"\n      },\n      \"preferences\": {\n        \"locale\": {\n          \"language\": \"en\",\n          \"country\": \"GB\"\n        },\n        \"timezone\": \"Africa/Abidjan\"\n      }\n    }\n  ]\n}\n```\n\n### Sample of output from default user exit\nThis is a result in Manage object structures after mapping masuser.json with the OOTB user exit.  This can serve as the input to further customized mapping if desired.\n\n\n```\n{\n   \"addressline1\": \"100 Universal City Plaza\",\n   \"city\": \"Hollywood\",\n   \"country\": \"USA\",\n   \"displayname\": \"Joe Smith\",\n   \"email\": [\n      {\n         \"_action\": \"AddChange\",\n         \"emailaddress\": \"joesmith5@us.ibm.com\",\n         \"isprimary\": 1,\n         \"type\": \"work\"\n      },\n      {\n         \"_action\": \"AddChange\",\n         \"emailaddress\": \"joesmith51@gmail.com\",\n         \"isprimary\": 0,\n         \"type\": \"work\"\n      }\n   ],\n   \"extension\": {\n      \"costCenter\": \"4130\",\n      \"employeeNumber\": \"701984\"\n   },\n   \"firstname\": \"Joe\",\n   \"language\": \"EN\",\n   \"lastname\": \"Smith\",\n   \"locale\": \"en_US\",\n   \"maxuser\": [\n      {\n         \"groupuser\": [\n            {\n               \"_action\": \"AddChange\",\n               \"groupname\": \"MAXADMIN\"\n            },\n            {\n               \"_action\": \"AddChange\",\n               \"groupname\": \"TOOLMGR\"\n            }\n         ],\n         \"inactivesites\": 1,\n         \"loginid\": \"joesmith5\",\n         \"statusdate\": \"2020-10-30T15:43:44-04:00\",\n         \"userid\": \"joesmith5\"\n      }\n   ],\n   \"personid\": \"joesmith5\",\n   \"phone\": [\n      {\n         \"_action\": \"AddChange\",\n         \"isprimary\": 1,\n         \"phonenum\": \"555-555-5555\",\n         \"type\": \"work\"\n      },\n      {\n         \"_action\": \"AddChange\",\n         \"isprimary\": 0,\n         \"phonenum\": \"555-555-4444\",\n         \"type\": \"home\"\n      }\n   ],\n   \"postalcode\": \"91608\",\n   \"stateprovince\": \"CA\",\n   \"statusdate\": \"2020-10-30T15:43:44-04:00\",\n   \"title\": \"Supervisor\"\n}\n```\n\n## LDAP Synchronization\n\nThe section tagged “extension” as shown in the samples includes all extra attributes which are not part of default mapping. The default mapping can be customized by creating a Java user exit or automation script or JSON Mapper.\n\n- Maximo Application Suite (MAS) will synchronize users and groups from the LDAP server. There is no direct synchronization from LDAP to Manage.\n- MAS will use WebSphere Liberty to synchronize with LDAP. Liberty provides a SCIM API for MAS to consume the data from LDAP repositories into MAS User Registry/IDP.\n\t- SCIM defines the resource (Users/Groups) schema as well as the REST(CRUD) APIs to manage the resources.\n- MAS to consume the data from LDAP repositories into MAS User Registry/IDP.\n- SCIM defines the resource (Users/Groups) schema as well as the REST(CRUD) APIs to manage the resources.\n- The section tagged “extension” can include all extra attributes which are not part of default mapping.\n- The schema attribute mapping can be customized using user exit, an automation script on user exit, or replacing the standard user exist with JSON Mapper user exit.\n## Flow ##\n- User configures SCIM User Sync from MAS UI\n- Backend API will create a ScimCfg CR and secret\n- TrustManager operator will add LDAP Server certificate to the truststore\n- SCIM operator will deploy liberty server and the k8s cronjob\n- Cron job will get Users from Liberty server and store it in MAS User Registry (mongo db)\n\n![image](images/ldap.png)\n\n<p></p>\nThe MAS sync process will consume user and user group information from SCIM APIs and update the MAS user registry. The Manage user sync process will pull the data from MAS and pushes it to Manage using MIF.\n\n## Manage Group Synchronization \n- User Groups are synchronized into Manage from MAS.\n- Users will be added in the group only if they are valid users in Manage.\n- The existing users in a group will be replaced by the users in the payload same as LDAP group synchronization.\n\n## Bulk Import Users to MAS (Upgrade)\n- Maximo users and their profiles (language, timezone, and locale) will be imported to MAS during the upgrade.\n  - A one-time cron task instance will be created during the upgrade to import users to MAS.\n- Welcome emails will be sent to the users with a password for their account. If the user email is not set, email will be sent to the system administrator email account.\n  - The system administrator email will be set up from MAS admin dashboard.\n  - SMTP can be configured in MAS prior to upgrade to receive Welcome emails and emails with user password.\n  - The user password can be reset by the System Administrator.\n\nWelcome Email Templates:\n \n```\nTo: ${email}\nTitle: Welcome to IBM Maximo Application Suite\nBody: Welcome to IBM Maximo Application Suite, a new account has been registered to ${email} in <a href=\"${masHomeUrl}\">IBM Maximo Application Suite (${instanceName})</a>.\n\nUsername: ${username}\n\nYou will receive your password in a seperate e-mail (only show this if emailPassword has been set)\n```\n\n```\nTo: ${email}\nTitle: Your new IBM Maximo Application Suite password\nBody: Welcome to <a href=\"${masHomeUrl}\">IBM Maximo Application Suite (${instanceName})</a>. your new password is below.\n\nPassword: ${password}\n```\n\n","fileAbsolutePath":"/home/travis/build/maximo/manage-playbook/src/pages/upgrade/security.mdx"}}},"staticQueryHashes":["1364590287","137577622","137577622","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","768070550"]}